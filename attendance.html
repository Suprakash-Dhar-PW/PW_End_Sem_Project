<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>PW IOI - Attendance</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="attendance.css">
    <style>
        /* Remove underline from social icons in the footer */
        .site-footer .social-icons a {
            text-decoration: none !important;
        }

        .footer {
            width: 100%;
            background-color: var(--secondary-color);
            color: #fff;
            padding: 1rem;
            font-size: 14px;

            display: flex;
            justify-content: center;
            /* ✅ Centers horizontally */
            align-items: center;
            /* ✅ Centers vertically */
            text-align: center;
            /* ✅ Ensures text is centered inside */
        }

        @media (max-width: 768px) {
            .footer {
                display: flex;
                justify-content: center;
                align-items: center;
                text-align: center;
            }

            .loading-overlay,
            #sidebarOverlay {
                display: none;
                pointer-events: none;
                z-index: -1;
            }

            .loading-overlay.active,
            #sidebarOverlay.active {
                display: flex;
                /* or block */
                pointer-events: all;
                z-index: 10000;
            }
        }
    </style>
</head>

<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loader"></div>
    </div>

    <button class="mobile-menu-toggle" onclick="toggleMobileSidebar()" aria-label="Toggle Mobile Menu">
        <i class="fas fa-bars"></i>
    </button>

    <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeMobileSidebar()"></div>

    <div class="top-right-controls">
        <div class="auth-buttons">
            <button class="login-btn" onclick="showLoginModal()">
                <i class="fas fa-sign-in-alt"></i> <span class="btn-text">Login</span>
            </button>
            <button class="signup-btn" onclick="showSignupModal()">
                <i class="fas fa-user-plus"></i> <span class="btn-text">Sign Up</span>
            </button>
        </div>
        <div class="profile-icon" onclick="goToProfile()" title="View Profile">
            <img src="images/Supra_image.jpg" alt="Profile" />
        </div>
    </div>

    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo" id="sidebar-logo">PW IOI</div>
            <button class="toggle-btn" onclick="toggleSidebar()" aria-label="Toggle Sidebar">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        <nav class="nav-section" role="navigation">
            <a href="index.html" class="nav-link" data-tooltip="Dashboard"><i class="fas fa-home"></i>
                <span>Dashboard</span></a>
            <a href="task-manager.html" class="nav-link" data-tooltip="Task Manager"><i class="fas fa-tasks"></i>
                <span>Task Manager</span></a>
            <a href="attendance.html" class="nav-link active" data-tooltip="Attendance"><i
                    class="fas fa-calendar-check"></i> <span>Attendance</span></a>
            <a href="mentor-attendance.html" class="nav-link" data-tooltip="Mentor Attendance"><i
                    class="fas fa-user-check"></i> <span>Mentor Attendance</span></a>
            <a href="projects.html" class="nav-link" data-tooltip="Projects"><i class="fas fa-project-diagram"></i>
                <span>Projects</span></a>
            <a href="job-portal.html" class="nav-link" data-tooltip="Job Portal"><i class="fas fa-briefcase"></i>
                <span>Job Portal</span></a>
            <a href="announcements.html" class="nav-link" data-tooltip="Announcements"><i class="fas fa-bullhorn"></i>
                <span>Announcements</span></a>
            <a href="community-events.html" class="nav-link" data-tooltip="Community Events"><i class="fas fa-calendar-day"></i>
                <span>Community Events</span></a>
            <a href="notes.html" class="nav-link" data-tooltip="Notes"><i class="fas fa-book"></i>
                <span>Notes</span></a>
            <a href="dsa-tracker.html" class="nav-link" data-tooltip="DSA Tracker"><i class="fas fa-code"></i>
                <span>DSA Tracker</span></a>
            <a href="dsa-leaderboard.html" class="nav-link" data-tooltip="DSA Leaderboard"><i class="fas fa-trophy"></i>
                <span>DSA Leaderboard</span></a>
            <div class="pinned-label">Pinned</div>
            <a href="portfolio.html" class="nav-link" data-tooltip="Portfolio"><i class="fas fa-user"></i>
                <span>Portfolio</span></a>
            <a href="community.html" class="nav-link" data-tooltip="Community"><i class="fas fa-users"></i>
                <span>Community</span></a>
            <a href="leave-form.html" class="nav-link" data-tooltip="Leave Form"><i class="fas fa-file-alt"></i> <span>Leave
                    Form</span></a>
            <a href="gallery.html" class="nav-link" data-tooltip="Gallery"><i class="fas fa-images"></i>
                <span>Gallery</span></a>
            <a href="need-help.html" class="nav-link" data-tooltip="Need Help"><i class="fas fa-question-circle"></i>
                <span>Need Help</span></a>
            <a href="settings.html" class="nav-link" data-tooltip="Settings"><i class="fas fa-cog"></i>
                <span>Settings</span></a>
            <a href="#" class="nav-link" data-tooltip="Logout" onclick="logout()"><i class="fas fa-sign-out-alt"></i>
                <span>Logout</span></a>
        </nav>
    </div>

    <main class="main-content" id="main">
        <div class="main-heading">
            <h1 class="welcome_tag">Student Attendance System</h1>
        </div>

        <div class="attendance-container">
            <div class="attendance-header">
                <div class="attendance-filters">
                    <button class="filter-btn active">Daily <span class="date-info">May 15, 2023</span></button>
                    <button class="filter-btn">Weekly <span class="date-info">May 15-21, 2023</span></button>
                    <button class="filter-btn">Monthly <span class="date-info">May 2023</span></button>
                </div>
                <div class="attendance-actions">
                    <div class="form-group semester-select-container">
                        <select id="semesterSelect" class="attendance-select">
                            <option value="1">Semester 1</option>
                            <option value="2">Semester 2</option>
                            <option value="3">Semester 3</option>
                        </select>
                    </div>
                    <button class="attendance-btn">
                        <i class="fas fa-download"></i> Export Report
                    </button>
                </div>
            </div>

            <div class="attendance-stats">
                <div class="attendance-card">
                    <div class="attendance-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <h3 class="attendance-title">Overall Attendance</h3>
                    <div class="attendance-value">92%</div>
                    <div class="attendance-subtitle">Excellent Standing</div>
                </div>

                <div class="attendance-card">
                    <div class="attendance-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h3 class="attendance-title">Attendance Warnings</h3>
                    <div class="attendance-value">0</div>
                    <div class="attendance-subtitle">No warnings issued</div>
                </div>

                <div class="attendance-card">
                    <div class="attendance-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3 class="attendance-title">Total Classes</h3>
                    <div class="attendance-value">124</div>
                    <div class="attendance-subtitle">Attended: 114</div>
                </div>
            </div>

            <!-- Attendance Trend Graph -->
            <div class="attendance-graph-container">
                <h3 class="graph-title">Attendance Trends (Last 6 Months)</h3>
                <div class="attendance-graph" id="attendanceGraph">
                    <!-- Canvas for the chart -->
                    <canvas id="attendanceChart"></canvas>
                </div>
            </div>

            <!-- Course-wise Attendance Table -->
            <div class="course-attendance-table">
                <h3 class="course-title">Course-wise Attendance</h3>
                <div class="view-selector">
                    <button class="view-btn active" data-view="daily">Daily View <span class="date-info">May 15, 2023</span></button>
                    <button class="view-btn" data-view="weekly">Weekly View <span class="date-info">May 15-21, 2023</span></button>
                    <button class="view-btn" data-view="monthly">Monthly View <span class="date-info">May 2023</span></button>
                </div>
                
                <div class="table-container" id="dailyAttendanceView">
                    <table class="attendance-table course-attendance-detail">
                        <thead>
                            <tr>
                                <th>Subject</th>
                                <th>Monday<br><span class="date-info">May 15</span></th>
                                <th>Tuesday<br><span class="date-info">May 16</span></th>
                                <th>Wednesday<br><span class="date-info">May 17</span></th>
                                <th>Thursday<br><span class="date-info">May 18</span></th>
                                <th>Friday<br><span class="date-info">May 19</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><i class="fab fa-html5"></i> HTML</td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                                <td><span class="status-icon absent"><i class="fas fa-times"></i></span></td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                                <td>-</td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                            </tr>
                            <tr>
                                <td><i class="fab fa-css3-alt"></i> CSS</td>
                                <td>-</td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-code"></i> C Language</td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                                <td>-</td>
                                <td><span class="status-icon absent"><i class="fas fa-times"></i></span></td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-comments"></i> Tech Comm.</td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                                <td>-</td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                                <td><span class="status-icon absent"><i class="fas fa-times"></i></span></td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-laptop-code"></i> Computer Fundamentals</td>
                                <td><span class="status-icon absent"><i class="fas fa-times"></i></span></td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                                <td>-</td>
                                <td><span class="status-icon present"><i class="fas fa-check"></i></span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="table-container" id="weeklyAttendanceView" style="display: none;">
                    <table class="attendance-table course-attendance-detail">
                        <thead>
                            <tr>
                                <th>Subject</th>
                                <th>Week 1<br><span class="date-info">May 1-7</span></th>
                                <th>Week 2<br><span class="date-info">May 8-14</span></th>
                                <th>Week 3<br><span class="date-info">May 15-21</span></th>
                                <th>Week 4<br><span class="date-info">May 22-28</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><i class="fab fa-html5"></i> HTML</td>
                                <td>80%</td>
                                <td>100%</td>
                                <td>60%</td>
                                <td>90%</td>
                            </tr>
                            <tr>
                                <td><i class="fab fa-css3-alt"></i> CSS</td>
                                <td>75%</td>
                                <td>100%</td>
                                <td>75%</td>
                                <td>100%</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-code"></i> C Language</td>
                                <td>60%</td>
                                <td>80%</td>
                                <td>80%</td>
                                <td>60%</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-comments"></i> Tech Comm.</td>
                                <td>100%</td>
                                <td>75%</td>
                                <td>75%</td>
                                <td>100%</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-laptop-code"></i> Computer Fundamentals</td>
                                <td>80%</td>
                                <td>60%</td>
                                <td>100%</td>
                                <td>80%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="table-container" id="monthlyAttendanceView" style="display: none;">
                    <table class="attendance-table course-attendance-detail">
                        <thead>
                            <tr>
                                <th>Subject</th>
                                <th>August<br><span class="date-info">2023</span></th>
                                <th>September<br><span class="date-info">2023</span></th>
                                <th>October<br><span class="date-info">2023</span></th>
                                <th>November<br><span class="date-info">2023</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><i class="fab fa-html5"></i> HTML</td>
                                <td>85%</td>
                                <td>90%</td>
                                <td>95%</td>
                                <td>92%</td>
                            </tr>
                            <tr>
                                <td><i class="fab fa-css3-alt"></i> CSS</td>
                                <td>80%</td>
                                <td>85%</td>
                                <td>90%</td>
                                <td>88%</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-code"></i> C Language</td>
                                <td>70%</td>
                                <td>75%</td>
                                <td>80%</td>
                                <td>76%</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-comments"></i> Tech Comm.</td>
                                <td>75%</td>
                                <td>80%</td>
                                <td>85%</td>
                                <td>82%</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-laptop-code"></i> Computer Fundamentals</td>
                                <td>80%</td>
                                <td>85%</td>
                                <td>90%</td>
                                <td>85%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Course-wise Attendance Summary -->
            <div class="course-attendance">
                <h3 class="course-title">Attendance Summary</h3>

                <div class="course-item">
                    <div class="course-header">
                        <span class="course-name"><i class="fab fa-html5"></i> HTML</span>
                        <span class="course-percentage">95%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" style="width: 95%"></div>
                    </div>
                </div>

                <div class="course-item">
                    <div class="course-header">
                        <span class="course-name"><i class="fab fa-css3-alt"></i> CSS</span>
                        <span class="course-percentage">88%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" style="width: 88%"></div>
                    </div>
                </div>

                <div class="course-item">
                    <div class="course-header">
                        <span class="course-name"><i class="fas fa-code"></i> C Language</span>
                        <span class="course-percentage">76%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" style="width: 76%"></div>
                    </div>
                </div>

                <div class="course-item">
                    <div class="course-header">
                        <span class="course-name"><i class="fas fa-comments"></i> Tech Comm.</span>
                        <span class="course-percentage">82%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" style="width: 82%"></div>
                    </div>
                </div>
                
                <div class="course-item">
                    <div class="course-header">
                        <span class="course-name"><i class="fas fa-laptop-code"></i> Computer Fundamentals</span>
                        <span class="course-percentage">85%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" style="width: 85%"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="site-footer footer">
        <div class="footer-content">
            <p>&copy; 2025 PW IOI. All rights reserved. | Empowering the next generation of developers.</p>

            <div class="social-icons">
                <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                <a href="#" aria-label="GitHub"><i class="fab fa-github"></i></a>
            </div>

            <form class="newsletter-form" onsubmit="handleNewsletterSubmit(event)">
                <input type="email" placeholder="Enter your email for updates" required
                    aria-label="Email for newsletter" />
                <button type="submit"><i class="fas fa-paper-plane"></i> Subscribe</button>
            </form>

            <div class="footer-links">
                <a href="#privacy">Privacy Policy</a>
                <a href="#terms">Terms of Service</a>
                <a href="#contact">Contact Support</a>
                <a href="#about">About Us</a>
            </div>
        </div>
    </footer>

    <button onclick="scrollToTop()" class="back-to-top" aria-label="Back to top" title="Back to top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- Toaster Container -->
    <div class="toaster-container" id="toasterContainer"></div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="index.js"></script>
    <script src="attendance.js"></script>
    <script>
        // Initialize the attendance chart when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Set up graph filter buttons
            const graphFilterBtns = document.querySelectorAll('.graph-filter-btn');
            graphFilterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remove active class from all buttons
                    graphFilterBtns.forEach(b => b.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    // Initialize chart with selected period
                    initializeAttendanceChart(this.dataset.period);
                });
            });

            // Set up view selector buttons
            const viewBtns = document.querySelectorAll('.view-btn');
            const viewContainers = [
                document.getElementById('dailyAttendanceView'),
                document.getElementById('weeklyAttendanceView'),
                document.getElementById('monthlyAttendanceView')
            ];

            viewBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remove active class from all buttons
                    viewBtns.forEach(b => b.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Hide all view containers
                    viewContainers.forEach(container => {
                        container.style.display = 'none';
                    });
                    
                    // Show selected view container
                    const selectedView = this.dataset.view;
                    document.getElementById(`${selectedView}AttendanceView`).style.display = 'block';
                });
            });

            // Set up semester select change event
            const semesterSelect = document.getElementById('semesterSelect');
            semesterSelect.addEventListener('change', function() {
                // In a real application, this would load subjects for the selected semester
                console.log(`Selected semester: ${this.value}`);
                // For demo purposes, we'll just log the selected semester
            });

            // Initialize the attendance chart with weekly data by default
            if (typeof initializeAttendanceChart === 'function') {
                initializeAttendanceChart('weekly');
            }
        });
    </script>

    <footer class="site-footer footer">
        <div class="footer-content">
            <p>&copy; 2025 PW IOI. All rights reserved. | Empowering the next generation of developers.</p>

            <div class="social-icons">
                <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                <a href="#" aria-label="GitHub"><i class="fab fa-github"></i></a>
            </div>

            <form class="newsletter-form" onsubmit="handleNewsletterSubmit(event)">
                <input type="email" placeholder="Enter your email for updates" required aria-label="Email for newsletter" />
                <button type="submit"><i class="fas fa-paper-plane"></i> Subscribe</button>
            </form>

            <div class="footer-links">
                <a href="#privacy">Privacy Policy</a>
                <a href="#terms">Terms of Service</a>
                <a href="#contact">Contact Support</a>
                <a href="#about">About Us</a>
            </div>
        </div>
    </footer>

    <button onclick="scrollToTop()" class="back-to-top" aria-label="Back to top" title="Back to top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- Toaster Container -->
    <div class="toaster-container" id="toasterContainer"></div>
</body>

</html>